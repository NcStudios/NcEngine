on:
  workflow_call:
    inputs:
      presetName:
        required: true
        type: string
      sourceDir:
        required: true
        type: string
        
jobs:
  Windows:
    runs-on: windows-2022

    steps:
    - name: Checkout Branch
      uses: actions/checkout@v2
      with:
        submodules: recursive

    - name: Setup MSVC
      uses: ilammy/msvc-dev-cmd@v1
 
    - name: Setup Vulkan Sdk
      uses: humbletim/setup-vulkan-sdk@v1.2.0
      with:
        vulkan-query-version: 1.2.198.0
        vulkan-components: Vulkan-Headers, Vulkan-Loader
 
    - name: Configure
      run: cmake -S ${{sourceDir}} -B ${{github.workspace}}/build/${{presetName}} --preset ${{presetName}}
          
    - name: Build
      run: cmake --build ${{github.workspace}}/build/${{presetName}}
